@import url('https://unpkg.com/leaflet@1.9.4/dist/leaflet.css');

/* Global base */
html, body, #__next { 
  height: 100%; 
  width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}
* { box-sizing: border-box; }

/* Ensure body is the positioning context */
body {
  position: relative;
}

/* Matrix Theme Variables */
html[data-theme="matrix"] {
  background: #000000; /* Black behind everything */
  /* palette */
  --bg: #000000;
  --bg-alt: #0a0a0a;
  --panel: #0b0f0b;
  --grid: #0d0d0d;
  --text: #d7ffd7;
  --muted: #9fffb1;
  --accent: #00ff41;
  --accent-2: #00b33c;
  --ring: #00ff41;
  --error: #ff3d3d;
  --warning: #ccff00;
  --shadow: 0 0 24px rgba(0,255,65,0.25);
}

/* Base body styles */
html[data-theme="matrix"] body { 
  color: var(--text); 
  background: transparent; /* Let MatrixRain canvas show through! */
}

/* Selection */
html[data-theme="matrix"] ::selection {
  background: rgba(0,255,65,0.25);
  color: var(--accent);
}

/* Scrollbar (webkit) */
html[data-theme="matrix"] ::-webkit-scrollbar { width: 10px; height: 10px; }
html[data-theme="matrix"] ::-webkit-scrollbar-thumb {
  background: rgba(0,255,65,0.35);
  border-radius: 8px;
}
html[data-theme="matrix"] ::-webkit-scrollbar-track { background: transparent; }

/* Simple utilities for Matrix look (can be used in components) */
.mx-panel { background: rgba(11, 15, 11, 0.75); border: 1px solid rgba(0,255,65,0.18); box-shadow: var(--shadow); backdrop-filter: blur(8px); }
.mx-text { color: var(--text); }
.mx-accent { color: var(--accent); }
.mx-border { border-color: rgba(0,255,65,0.18); }
.mx-ring:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--ring); }

/* Glitch and CRT aesthetics */
@keyframes mx-glitch-shift {
  0% { transform: translate(0); }
  20% { transform: translate(-1px, 1px); }
  40% { transform: translate(1px, -1px); }
  60% { transform: translate(-1px, -1px); }
  80% { transform: translate(1px, 1px); }
  100% { transform: translate(0); }
}
.mx-glitch { position: relative; }
.mx-glitch::before, .mx-glitch::after {
  content: attr(data-text);
  position: absolute;
  left: 0; top: 0; opacity: .4; pointer-events: none;
}
.mx-glitch::before { color: #0ff; transform: translate(1px, 0); mix-blend-mode: screen; }
.mx-glitch::after { color: #f0f; transform: translate(-1px, 0); mix-blend-mode: screen; }

.mx-crt::after {
  content: "";
  position: absolute; inset: 0; pointer-events: none;
  background: repeating-linear-gradient(to bottom, rgba(0,0,0,0) 0 2px, rgba(0,255,65,0.06) 2px 3px);
}

/* Leaflet neon markers */
.mx-marker {
  width: 14px; height: 14px; border-radius: 9999px;
  border: 2px solid var(--accent);
  background: rgba(0,255,65,0.2);
  box-shadow: 0 0 8px rgba(0,255,65,0.9), 0 0 18px rgba(0,255,65,0.6);
}
.mx-marker.guess { border-color: #00d0ff; background: rgba(0,208,255,0.15); box-shadow: 0 0 8px rgba(0,208,255,0.9), 0 0 18px rgba(0,208,255,0.6); }

/* Progress bar */
.mx-progress { background: rgba(0,255,65,0.12); border: 1px solid rgba(0,255,65,0.25); }
.mx-progress > .bar { background: var(--accent); box-shadow: 0 0 12px rgba(0,255,65,0.8); }

/* Leaflet polylines glow */
.mx-polyline { filter: drop-shadow(0 0 6px rgba(0,255,65,.8)); }
